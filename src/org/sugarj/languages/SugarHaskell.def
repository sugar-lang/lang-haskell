definition
module org/sugarj/languages/SugarHaskell
imports org/sugarj/languages/Haskell
        org/sugarj/languages/Sdf2
        org/sugarj/languages/Stratego
        org/sugarj/languages/EditorServices
        org/sugarj/languages/Sugar

exports
  context-free start-symbols
  	SugarCompilationUnit

  context-free syntax
    HaskellModuleDec HaskellImportdecl* SugarHaskellBody -> SugarCompilationUnit {cons("CompilationUnit")}

    "module" HaskellModid HaskellExports? "where" -> HaskellModuleDec {cons("ModuleDec")}

    HaskellOffsideTopdeclList LAYOUT?  -> SugarHaskellBody {cons("HaskellBody")}
    SugarDefElem*             LAYOUT? -> SugarHaskellBody {cons("SugarBody")}
    EditorServiceSection*     LAYOUT? -> SugarHaskellBody {cons("EditorBody")}

  context-free restrictions
    SugarHaskellBody -/- ~[]

  context-free syntax
    HaskellModuleDec LAYOUT?    -> LayoutedToplevelDeclaration
    HaskellImportdecl LAYOUT?   -> LayoutedToplevelDeclaration {enforce-newline, layout(gt(col(left(1)), col(first(1))))}
    SugarHaskellBody LAYOUT?    -> LayoutedToplevelDeclaration

    LayoutedToplevelDeclaration Rest
      -> NextToplevelDeclaration {cons("NextToplevelDeclaration"), layout(eq(col(first(1)), col(first(2))))}

